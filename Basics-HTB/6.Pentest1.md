## First Pentest

1. Ip address => 10.129.157.172
2. Nmap result: ***nmap -sC -p- 10.129.157.172***
```shell
Nmap scan report for 10.129.157.172
Host is up (0.082s latency).
Not shown: 65528 closed tcp ports (reset)
PORT     STATE SERVICE
21/tcp   open  ftp
| ftp-anon: Anonymous FTP login allowed (FTP code 230)
|_drwxr-xr-x    2 ftp      ftp          4096 Feb 25  2021 pub
| ftp-syst: 
|   STAT: 
| FTP server status:
|      Connected to ::ffff:10.10.14.56
|      Logged in as ftp
|      TYPE: ASCII
|      No session bandwidth limit
|      Session timeout in seconds is 300
|      Control connection is plain text
|      Data connections will be plain text
|      At session startup, client count was 2
|      vsFTPd 3.0.3 - secure, fast, stable
|_End of status
22/tcp   open  ssh
| ssh-hostkey: 
|   3072 a0:01:d7:79:e9:d2:09:2a:b8:d9:b4:9a:6c:00:0c:1c (RSA)
|   256 2b:99:b2:1f:ec:1a:5a:c6:b7:be:b5:50:d1:0e:a9:df (ECDSA)
|_  256 e4:f8:17:8d:d4:71:d1:4e:d4:0e:bd:f0:29:4f:6d:14 (ED25519)
80/tcp   open  http
|_http-title: PHP 7.4.3 - phpinfo()
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
2323/tcp open  3d-nfsd
8080/tcp open  http-proxy
|_http-title: Apache Tomcat

Host script results:
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2024-08-07T02:44:24
|_  start_date: N/A
|_nbstat: NetBIOS name: GS-SVCSCAN, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
```
3. Services running:
    - Ftp 21
    - SSH 22
    - http 80
    - netbios-ssn 139
    - microsoft-ds 445
    - 3d-nfsd 2323
    - http-proxy 8080

<hr>

### Enumerate serivces
1. What is  port 2323?
2. Banner grabbing using nmap: ***nmap --script=banner 10.129.157.172 -p2323***
```bash
Nmap scan report for 10.129.157.172
Host is up (0.081s latency).

PORT     STATE SERVICE
2323/tcp open  3d-nfsd
|_banner: \xFF\xFD\x18\xFF\xFD \xFF\xFD#\xFF\xFD'
```
3. Doesn't show much evidence.
4. Try -sV for version scripts.
```shell
nmap --script=banner -sV 10.129.157.172 -p2323
Nmap scan report for 10.129.157.172
Host is up (0.081s latency).

PORT     STATE SERVICE VERSION
2323/tcp open  telnet  Linux telnetd
|_banner: \xFF\xFD\x18\xFF\xFD \xFF\xFD#\xFF\xFD'
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```
5. 2323 ==> Telnet

<hr>

### SMB enumeration
1. To list the SMB shares available: ***smbclient -N -L \\\\ip***
    - "-L" lists all the shares available on the remote host
    - "-N" suppresses the password promt.
```shell
smbclient -N -L \\\\10.129.157.172

        Sharename       Type      Comment
        ---------       ----      -------
        print$          Disk      Printer Drivers
        users           Disk      
        IPC$            IPC       IPC Service (gs-svcscan server (Samba, Ubuntu))
Reconnecting with SMB1 for workgroup listing.
```
2. There is a non default share "users"
3. Let's connect to user share as the user Bob ==> bob:Welcome1
    - ***smbclient -U bob \\\\10.129.157.172\\\users***
```shell
smbclient -U bob \\\\10.129.157.172\\users
Password for [WORKGROUP\bob]:
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Thu Feb 25 17:06:52 2021
  ..                                  D        0  Thu Feb 25 14:05:31 2021
  flag                                D        0  Thu Feb 25 17:09:26 2021
  bob                                 D        0  Thu Feb 25 15:42:23 2021

                4062912 blocks of size 1024. 1350260 blocks available
smb: \> cd flag\
smb: \flag\> ls
  .                                   D        0  Thu Feb 25 17:09:26 2021
  ..                                  D        0  Thu Feb 25 17:06:52 2021
  flag.txt                            N       33  Thu Feb 25 17:09:26 2021

                4062912 blocks of size 1024. 1350260 blocks available
smb: \flag\> get flag.txt 
getting file \flag\flag.txt of size 33 as flag.txt (0.1 KiloBytes/sec) (average 0.1 KiloBytes/sec)
smb: \flag\> exit
┌─[us-academy-4]─[10.10.14.56]─[htb-ac-1397757@htb-dxhoarp8gc]─[~]
└──╼ [★]$ ls
cacert.der  Desktop  Documents  Downloads  flag.txt  Music  Pictures  Public  Templates  Videos
┌─[us-academy-4]─[10.10.14.56]─[htb-ac-1397757@htb-dxhoarp8gc]─[~]
└──╼ [★]$ cat flag.txt 
dceece590f3284c3866305eb2473d099
```

